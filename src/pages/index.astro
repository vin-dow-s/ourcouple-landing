---
import Layout from '../layouts/Layout.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';

const appStoreUrl = "https://apps.apple.com/app/id6758024356";
---

<Layout title="OurCouple - Your Shared Space | Couple App for iOS" canonicalPath="/">
  <Header />

  <main class="flex-1">
    <!-- Hero Section -->
    <section class="relative min-h-screen flex items-center justify-center bg-gradient-radial overflow-hidden pt-20" id="hero">
      <!-- Decorative elements -->
      <div class="absolute top-20 left-10 w-64 h-64 bg-primary/10 rounded-full blur-3xl"></div>
      <div class="absolute bottom-20 right-10 w-80 h-80 bg-partner/10 rounded-full blur-3xl"></div>
      <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-accent/5 rounded-full blur-3xl"></div>

      <div class="relative z-10 max-w-6xl mx-auto px-6 py-12 text-center">
        <!-- Hero Text -->
        <h1 class="animate-fade-in text-4xl md:text-6xl font-bold text-text mb-4 tracking-tighter">
          Your Relationship Noticeboard
        </h1>
        <p class="animate-fade-in-delay-1 text-lg md:text-xl text-text-secondary max-w-2xl mx-auto mb-8">
          OurCouple is the shared space for you and your partner. <br class="hidden sm:inline" />Messages, memories, notes & events — all in one place.
        </p>

        <!-- App Store Download -->
        <div class="animate-fade-in-delay-2 max-w-md mx-auto">
          <a
            href={appStoreUrl}
            target="_blank"
            rel="noopener noreferrer"
            class="inline-block transition-transform hover:scale-105"
            aria-label="Download OurCouple on the App Store"
            data-fast-goal="cta_hero_download"
          >
            <img
              src="/app-store-badge.svg"
              alt="Download on the App Store"
              class="h-14 mx-auto"
            />
          </a>
          <p class="text-neutral-500 text-sm mt-0">Start free • No credit card</p>
        </div>

        <!-- Video/Image Preview -->
        <div class="mt-10 min-h-[50vh] flex items-center justify-center animate-fade-in-delay-video">
          <div class="inline-block rounded-3xl shadow-lg shadow-black/15">
            <video
              autoplay
              muted
              loop
              playsinline
              class="mx-auto max-h-[50vh] rounded-3xl"
              aria-label="OurCouple app demonstration showing daily messages and photo sharing between partners"
            >
              <source src="/ProductDemoLaunch.mp4" type="video/mp4" />
              Your browser does not support the video tag.
            </video>
          </div>
        </div>


      </div>
    </section>

    <!-- Features Section -->
    <section id="features" class="py-24 bg-card" data-fast-scroll="scroll_features">
      <div class="max-w-6xl mx-auto px-6">
        <h2 class="tracking-tighter text-4xl md:text-5xl font-bold text-center text-text mb-4">
          Built for connection
        </h2>
        <p class="text-text-secondary text-center text-base mb-8 sm:mb-12 max-w-2xl mx-auto">
          Everything you need, no unnecessary clutter
        </p>


        <div class="grid md:grid-cols-3 gap-8">
          <!-- Feature 1: Message of the Day -->
          <article class="p-8 rounded-2xl bg-background border border-border hover:border-primary/30 transition-colors">
            <div class="w-14 h-14 rounded-2xl bg-primary/10 flex items-center justify-center mb-6">
              <svg class="w-7 h-7 text-primary" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"/>
              </svg>
            </div>
            <h3 class="font-semibold text-xl text-text mb-3">Daily check-ins</h3>
            <p class="text-text-secondary mb-3">
              Message/photo/question of the day, simply but keeps you connected with your partner and grows your love streak
            </p>
            <span class="inline-block text-xs font-medium text-primary bg-primary/10 px-2 py-1 rounded-full">Show that you care</span>
          </article>

          <!-- Feature 2: Daily Inspirations -->
          <article class="p-8 rounded-2xl bg-background border border-border hover:border-primary/30 transition-colors">
            <div class="w-14 h-14 rounded-2xl bg-primary/10 flex items-center justify-center mb-6">
              <svg class="w-7 h-7 text-primary" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="4"/>
                <path d="M12 2v2"/>
                <path d="M12 20v2"/>
                <path d="m4.93 4.93 1.41 1.41"/>
                <path d="m17.66 17.66 1.41 1.41"/>
                <path d="M2 12h2"/>
                <path d="M20 12h2"/>
                <path d="m6.34 17.66-1.41 1.41"/>
                <path d="m19.07 4.93-1.41 1.41"/>
              </svg>
            </div>
            <h3 class="font-semibold text-xl text-text mb-3">Love Notes</h3>
            <p class="text-text-secondary mb-3">
               Your words of inspiration, support, or simply something sweet. Each day, one is shown to your partner.
            </p>
            <span class="inline-block text-xs font-medium text-primary bg-primary/10 px-2 py-1 rounded-full">Surprise each other daily</span>
          </article>

          <!-- Feature 3: Private Memories -->
          <article class="p-8 rounded-2xl bg-background border border-border hover:border-primary/30 transition-colors">
            <div class="w-14 h-14 rounded-2xl bg-primary/10 flex items-center justify-center mb-6">
              <svg class="w-7 h-7 text-primary" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <rect width="18" height="18" x="3" y="3" rx="2" ry="2"/>
                <circle cx="9" cy="9" r="2"/>
                <path d="m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"/>
              </svg>
            </div>
            <h3 class="font-semibold text-xl text-text mb-3">Memory Album</h3>
            <p class="text-text-secondary mb-3">
              Your favorite moments together, photos & captions. Keep your memories alive.
            </p>
            <span class="inline-block text-xs font-medium text-primary bg-primary/10 px-2 py-1 rounded-full">Never lost in chat history</span>
          </article>

          <!-- Feature 4: Shared Notes -->
          <article class="p-8 rounded-2xl bg-background border border-border hover:border-primary/30 transition-colors">
            <div class="w-14 h-14 rounded-2xl bg-primary/10 flex items-center justify-center mb-6">
              <svg class="w-7 h-7 text-primary" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"/>
                <path d="M14 2v4a2 2 0 0 0 2 2h4"/>
                <path d="M10 9H8"/>
                <path d="M16 13H8"/>
                <path d="M16 17H8"/>
              </svg>
            </div>
            <h3 class="font-semibold text-xl text-text mb-3">Shared Notes</h3>
            <p class="text-text-secondary mb-3">
              One place for everything you want to write and remember, from love notes to more practical ones.
            </p>
            <span class="inline-block text-xs font-medium text-primary bg-primary/10 px-2 py-1 rounded-full">Both can edit in real-time</span>
          </article>

          <!-- Feature 5: Events & Dates -->
          <article class="p-8 rounded-2xl bg-background border border-border hover:border-primary/30 transition-colors">
            <div class="w-14 h-14 rounded-2xl bg-primary/10 flex items-center justify-center mb-6">
              <svg class="w-7 h-7 text-primary" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M8 2v4"/>
                <path d="M16 2v4"/>
                <rect width="18" height="18" x="3" y="4" rx="2"/>
                <path d="M3 10h18"/>
              </svg>
            </div>
            <h3 class="font-semibold text-xl text-text mb-3">Events & Ideas</h3>
            <p class="text-text-secondary mb-3">
              Dates, bucket lists, save what you want to do together and see what is coming up - booked or not. Syncs with Apple Calendar & Google Agenda.
            </p>
            <span class="inline-block text-xs font-medium text-primary bg-primary/10 px-2 py-1 rounded-full">Never forget ideas</span>
          </article>

          <!-- Feature 6: Private & Secure -->
          <article class="p-8 rounded-2xl bg-background border border-border hover:border-primary/30 transition-colors">
            <div class="w-14 h-14 rounded-2xl bg-primary/10 flex items-center justify-center mb-6">
              <svg class="w-7 h-7 text-primary" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <rect width="18" height="11" x="3" y="11" rx="2" ry="2"/>
                <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
              </svg>
            </div>
            <h3 class="font-semibold text-xl text-text mb-3">Private & Secure</h3>
            <p class="text-text-secondary mb-3">
              Your data is encrypted and stays between you two. No ads, no tracking, no sharing with third parties.
            </p>
            <span class="inline-block text-xs font-medium text-primary bg-primary/10 px-2 py-1 rounded-full">Just you two, always</span>
          </article>
        </div>
      </div>
    </section>

    <!-- How It Works Section -->
    <section class="py-24 bg-background" data-fast-scroll="scroll_how_it_works">
      <div class="max-w-4xl mx-auto px-6">
        <h2 class="tracking-tighter text-4xl md:text-5xl font-bold text-center text-text mb-4">
          Get Started <span class="hidden sm:inline">in Seconds</span>
        </h2>
        <p class="text-text-secondary text-center text-base mb-16">
          Connect with your partner in 3 simple steps
        </p>

        <div class="grid md:grid-cols-3 gap-8 text-center">
          <div>
            <div class="w-16 h-16 rounded-full bg-primary/10 flex items-center justify-center mx-auto mb-4">
              <span class="text-2xl font-bold text-primary">1</span>
            </div>
            <h3 class="font-semibold text-lg text-text mb-2">Download & Sign Up</h3>
            <p class="text-text-secondary">Create your account with just your email and name</p>
          </div>
          <div>
            <div class="w-16 h-16 rounded-full bg-primary/10 flex items-center justify-center mx-auto mb-4">
              <span class="text-2xl font-bold text-primary">2</span>
            </div>
            <h3 class="font-semibold text-lg text-text mb-2">Share Your Code</h3>
            <p class="text-text-secondary">Get a unique invite code and share it with your partner</p>
          </div>
          <div>
            <div class="w-16 h-16 rounded-full bg-primary/10 flex items-center justify-center mx-auto mb-4">
              <span class="text-2xl font-bold text-primary">3</span>
            </div>
            <h3 class="font-semibold text-lg text-text mb-2">Connect Together</h3>
            <p class="text-text-secondary">Your private couple space is ready. Start sharing!</p>
          </div>
        </div>
      </div>
    </section>

    <!-- FAQ Section -->
    <section id="faq" class="py-24 bg-card" data-fast-scroll="scroll_faq">
      <div class="max-w-3xl mx-auto px-6">
        <h2 class="tracking-tighter text-4xl md:text-5xl font-bold text-center text-text mb-4">
          Frequently Asked Questions
        </h2>
        <p class="text-text-secondary text-center text-base mb-12">
          Everything you need to know about OurCouple
        </p>

        <div class="space-y-4">
          <!-- FAQ 1 -->
          <details class="group bg-background border border-border rounded-2xl">
            <summary class="flex items-center justify-between p-6 cursor-pointer list-none">
              <h3 class="font-semibold text-lg text-text">Is OurCouple free to use?</h3>
              <svg class="w-5 h-5 text-text-secondary group-open:rotate-180 transition-transform" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="m6 9 6 6 6-6"/>
              </svg>
            </summary>
            <div class="px-6 pb-6 text-text-secondary">
              <p>Yes! OurCouple is free to download and use. The free plan includes unlimited daily messages, photos of the day, and love notes.
                
                Plus 5 memory photos, 10 notes, and 5 events. <br/><br/>Premium unlocks unlimited storage — one subscription covers both partners.</p>
            </div>
          </details>

          <!-- FAQ 2 -->
          <details class="group bg-background border border-border rounded-2xl">
            <summary class="flex items-center justify-between p-6 cursor-pointer list-none">
              <h3 class="font-semibold text-lg text-text">Is my data private?</h3>
              <svg class="w-5 h-5 text-text-secondary group-open:rotate-180 transition-transform" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="m6 9 6 6 6-6"/>
              </svg>
            </summary>
            <div class="px-6 pb-6 text-text-secondary">
              <p>Yes. Your data is encrypted and only accessible by you and your partner. We don't show ads, don't sell your data, and don't share it with anyone.</p>
            </div>
          </details>

          <!-- FAQ 3 -->
          <details class="group bg-background border border-border rounded-2xl">
            <summary class="flex items-center justify-between p-6 cursor-pointer list-none">
              <h3 class="font-semibold text-lg text-text">How do I connect with my partner?</h3>
              <svg class="w-5 h-5 text-text-secondary group-open:rotate-180 transition-transform" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="m6 9 6 6 6-6"/>
              </svg>
            </summary>
            <div class="px-6 pb-6 text-text-secondary">
              <p>After signing up, you'll receive a unique 6-character invite code. Share this code with your partner, and they can join your private couple space when they sign up. It only takes seconds to connect!</p>
            </div>
          </details>

          <!-- FAQ 4 -->
          <details class="group bg-background border border-border rounded-2xl">
            <summary class="flex items-center justify-between p-6 cursor-pointer list-none">
              <h3 class="font-semibold text-lg text-text">Is OurCouple available on Android?</h3>
              <svg class="w-5 h-5 text-text-secondary group-open:rotate-180 transition-transform" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="m6 9 6 6 6-6"/>
              </svg>
            </summary>
            <div class="px-6 pb-6 text-text-secondary">
              <p>OurCouple is currently available on iOS. Android version is coming soon! Enter your email below to be notified when it launches.</p>
            </div>
          </details>

          <!-- FAQ 5 -->
          <details class="group bg-background border border-border rounded-2xl">
            <summary class="flex items-center justify-between p-6 cursor-pointer list-none">
              <h3 class="font-semibold text-lg text-text">What makes OurCouple different?</h3>
              <svg class="w-5 h-5 text-text-secondary group-open:rotate-180 transition-transform" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="m6 9 6 6 6-6"/>
              </svg>
            </summary>
            <div class="px-6 pb-6 text-text-secondary">
              <p>Unlike messaging apps, OurCouple isn't for constant back-and-forth. It's a calm, organized space where you save what matters: your best photos (with captions), important notes, special dates... No pressure, no noise. Each day, you set one message and/or photo of the day for each other, and that keeps your streak alive.</p>
            </div>
          </details>
        </div>
      </div>
    </section>

    <!-- CTA Section -->
    <section class="py-24 bg-gradient-radial" data-fast-scroll="scroll_cta">
      <div class="max-w-4xl mx-auto px-6 text-center">
        <h2 class="tracking-tighter text-4xl md:text-5xl font-bold text-text mb-6">
          Create Your Couple Space Now
        </h2>
        <p class="text-base text-text-secondary mb-10">
          Download OurCouple and connect with your partner in seconds.
        </p>

        <!-- App Store Download -->
        <a
          href={appStoreUrl}
          target="_blank"
          rel="noopener noreferrer"
          class="inline-block transition-transform hover:scale-105"
          aria-label="Download OurCouple on the App Store"
          data-fast-goal="cta_bottom_download"
        >
          <img
            src="/app-store-badge.svg"
            alt="Download on the App Store"
            class="h-16 mx-auto"
          />
        </a>
        <p class="text-text-secondary text-sm mt-2 mb-8">Free to start • Upgrade anytime</p>

        <!-- Android Waitlist -->
        <div class="max-w-md mx-auto mt-16 p-6 bg-card/50 rounded-2xl border border-border">
          <p class="text-text-secondary mb-4">Android coming soon! Get notified:</p>
          <form class="flex flex-col sm:flex-row gap-3" id="android-waitlist-form">
            <input
              type="email"
              placeholder="Enter your email"
              required
              class="flex-1 px-5 py-3 rounded-xl border border-border bg-card text-text placeholder:text-text-light focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all"
            />
            <button
              type="submit"
              class="px-6 py-3 bg-partner text-white rounded-xl font-semibold hover:bg-partner/90 transition-colors whitespace-nowrap"
              data-fast-goal="cta_android_waitlist"
            >
              Notify Me
            </button>
          </form>
        </div>

        <p class="text-text-secondary mt-8">
          Questions? <a href="mailto:contact@vynse.dev" class="text-primary hover:text-primary-dark transition-colors font-medium">Contact us</a>
        </p>
      </div>
    </section>
  </main>

  <Footer />

  <!-- Android waitlist form handling -->
  <script define:vars={{
    SUPABASE_URL: import.meta.env.PUBLIC_SUPABASE_URL,
    SUPABASE_ANON_KEY: import.meta.env.PUBLIC_SUPABASE_ANON_KEY
  }}>
    const androidForm = document.getElementById('android-waitlist-form');
    if (androidForm) {
      androidForm.addEventListener('submit', async (e) => {
        e.preventDefault();

        const emailInput = androidForm.querySelector('input[type="email"]');
        const submitBtn = androidForm.querySelector('button[type="submit"]');
        const email = emailInput.value.trim().toLowerCase();

        emailInput.disabled = true;
        submitBtn.disabled = true;
        submitBtn.textContent = 'Joining...';

        try {
          const response = await fetch(`${SUPABASE_URL}/rest/v1/waitlist`, {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
              'apikey': SUPABASE_ANON_KEY,
              'Authorization': `Bearer ${SUPABASE_ANON_KEY}`,
              'Prefer': 'return=minimal'
            },
            body: JSON.stringify({ email, source: 'android-waitlist' })
          });

          if (response.ok) {
            emailInput.value = '';
            submitBtn.textContent = "You're in!";
            submitBtn.classList.remove('bg-partner', 'hover:bg-partner/90');
            submitBtn.classList.add('bg-green-500');

            setTimeout(() => {
              submitBtn.textContent = 'Notify Me';
              submitBtn.classList.remove('bg-green-500');
              submitBtn.classList.add('bg-partner', 'hover:bg-partner/90');
              emailInput.disabled = false;
              submitBtn.disabled = false;
            }, 3000);
          } else if (response.status === 409) {
            submitBtn.textContent = 'Already joined!';
            setTimeout(() => {
              submitBtn.textContent = 'Notify Me';
              emailInput.disabled = false;
              submitBtn.disabled = false;
            }, 2000);
          } else {
            throw new Error('Failed to join');
          }
        } catch (error) {
          console.error('Waitlist error:', error);
          submitBtn.textContent = 'Error, retry';
          submitBtn.classList.remove('bg-partner');
          submitBtn.classList.add('bg-red-500');

          setTimeout(() => {
            submitBtn.textContent = 'Notify Me';
            submitBtn.classList.remove('bg-red-500');
            submitBtn.classList.add('bg-partner');
            emailInput.disabled = false;
            submitBtn.disabled = false;
          }, 2000);
        }
      });
    }
  </script>
</Layout>
